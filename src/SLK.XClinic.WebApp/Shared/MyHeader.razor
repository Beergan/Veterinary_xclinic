@using System.Diagnostics
@inherits ComponentBase
@inject IBlazorContext _ctx
@inject ISweetAlertService swal
@inject IAuthService authSvc

<header>
    <nav class="navbar navbar-expand-lg navbar-dark" style="justify-content: normal">
        <a class="navbar-brand text-white">
            <a href="/"><img src="/assets/images/logo-mains.png" height="40" alt="logo-mains"></a>
            @if (_sidebarOpened)
            {
                <span class="close ml-3" @onclick="DrawerToggle"></span>
            }
            else
            {
                <span class="navbar-toggler-icon ml-3" @onclick="DrawerToggle"></span>
            }
        </a>

        <span class="d-none d-md-block" style="color: #d39c42; font-size: 15px">@(_company != null ? _company.Text : "Tên công ty")</span>

        <div class="fixed-right">
            <ul class="navbar-nav">
                <li class="nav-item"><a class="nav-link" target="_blank" href="#">Help</a></li>
                <li class="nav-item pl-1"><a class="nav-link" target="_blank" href="/version">Ver</a></li>
            </ul>
        </div>
    </nav>
</header>

<div class="app-sidebar @(_sidebarOpened ? "active" : string.Empty)">
    <NavMenu />
</div>

<style>
    div.avt-null {
        width: 40px;
        height: 40px;
        background-color: #D8DADF;
        border-radius: 50%;
    }

        div.avt-null > i {
            line-height: 38px;
            font-size: 17px;
            color: #fff;
        }

    a.a-click {
        cursor: pointer;
    }

    .text-green {
        color: #2AD360 !important;
    }

    .notification {
        overflow-y: scroll;
    }

    .menu-info a.dropdown-item {
        border-radius: 5px;
    }

        .menu-info a.dropdown-item:hover {
            background-color: #F0F2F5 !important;
        }

    .view-info {
        color: #2AD360;
    }

        .view-info:hover {
            background-color: #F0F2F5 !important;
            color: #2AD360 !important;
        }

    #card {
        border: 1px #eaeaea solid;
        box-shadow: 0px 0px 10px #eaecf4;
        -moz-box-shadow: 0px 0px 10px #eaecf4;
        -webkit-box-shadow: 0px 0px 10px #eaecf4;
        -o-box-shadow: 0px 0px 10px #eaecf4;
        -ms-box-shadow: 0px 0px 10px #eaecf4;
    }

    img#avatar-notify {
        border-radius: 50%;
    }

    .box-info, .view-info {
        border-radius: 5px;
    }

        .box-info:hover {
            background-color: #F0F2F5;
        }

        .box-info img#avt {
            border-radius: 50%;
            border: 1px #F0F2F5 solid;
        }

        .box-info #name {
            font-size: 14px;
        }

    img#avatar1 {
        width: 30px;
        height: 30px;
        border-radius: 50%;
    }

    #edit-pass:hover {
        cursor: pointer;
    }

    .close {
        display: inline-block;
        width: 25px;
        height: 25px;
        position: relative;
        text-align: center;
        top: 8px;
    }

        .close:after {
            content: '';
            height: 25px;
            border-left: 3px solid #fff;
            position: absolute;
            transform: rotate(45deg);
        }

        .close:before {
            content: '';
            height: 25px;
            border-left: 3px solid #fff;
            position: absolute;
            transform: rotate(-45deg);
        }

        .close:hover {
            opacity: 0.5 !important;
        }

    .dropdown-header {
        background-color: #fff;
        color: black;
        border: none;
        border-bottom: 1px solid #D8DADF;
    }

    .notification {
        border-radius: 5px;
    }
</style>

@code {
    private OptionItem<Guid> _company = new();
    protected bool _sidebarOpened { get; set; } = false;
    private string fullnameEm;

    [Inject] NavigationManager _navManager { get; set; }

    void DrawerToggle()
    {
        _sidebarOpened = !_sidebarOpened;
    }

    protected override async void OnInitialized()
    {
        _ctx.StateChanged += async (args) => { this.StateHasChanged(); };
    }
}
